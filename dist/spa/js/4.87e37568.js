(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"01bf":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"log"},e._l(e.logInternal,(function(t,n){return i("div",{key:n,staticClass:"line row"},[i("div",{staticClass:"info q-px-sm"},[e._v("\n            "+e._s(e._f("timeOnly")(t.time))+" "+e._s(t.direction)+"\n        ")]),i("pre",{staticClass:"col-grow"},[e._v(e._s(t.text))])])})),0)},s=[],o=i("bd4c");const c=[{direction:"~",time:"2019-06-02T11:42:42.000Z",text:"First Line"},{direction:"~",time:"2019-06-02T11:42:42.102Z",text:"multiline\n content"},{direction:"~",time:"2019-06-02T11:42:42.200Z",text:""},{direction:"~",time:"2019-06-02T11:42:42.420Z",text:"this 'line' contains a full unicode styled table:\n╔════════════════╦═══════╦══════╗\n║      Name      ║ Value ║ Unit ║\n╠════════════════╬═══════╬══════╣\n║ Ambient Light  ║    42 ║ LUX  ║\n║ LED-Brightness ║    50 ║ %    ║\n╚════════════════╩═══════╩══════╝"},{direction:"~",time:"2019-06-02T11:43:00.000Z",text:"the end.."}];var a={props:{log:{type:Array,default:function(){return[]}},logCountMax:{type:Number,default:500},directionOutSymbol:{type:String,default:"→"},directionInSymbol:{type:String,default:"*"},directionSpecialSymbol:{type:String,default:"~"},directionCommentSymbol:{type:String,default:"#"},showDemoData:{type:Boolean,default:!1}},data(){return{logInternal:[]}},computed:{},methods:{addEntry:function(e,t=this.directionInSymbol,i=new Date){const n={direction:t,time:i,text:e};this.logInternal.push(n);while(this.logInternal.length>this.logCountMax)this.logInternal.shift();this.$emit("update:log",this.logInternal)},addEntryOut:function(e){this.addEntry(e,this.directionOutSymbol,new Date)},addEntryIn:function(e){this.addEntry(e,this.directionInSymbol,new Date)},addEntrySpecial:function(e){this.addEntry(e,this.directionSpecialSymbol,new Date)},addEntryComment:function(e){this.addEntry(e,this.directionCommentSymbol,new Date)},clear:function(){this.logInternal=[]}},watch:{},mounted:function(){this.showDemoData?this.logInternal=c:this.logInternal=this.log},filters:{timeOnly:function(e){const t=new Date(e);let i="";return o["a"].isValid(t)&&(i=o["a"].formatDate(t,"HH:mm:ss.SSS")),i}}},l=a,d=(i("2d47"),i("2877")),r=Object(d["a"])(l,n,s,!1,null,null,null);t["a"]=r.exports},"2d47":function(e,t,i){"use strict";i("c19b")},c19b:function(e,t,i){},db37:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-page",{staticClass:"flex column",staticStyle:{"align-items":"center"}},[i("section",{staticClass:"q-mt-md row justify-around items-center "},[i("q-select",{staticClass:"q-mr-md",staticStyle:{"min-width":"12em",background:"transparent"},attrs:{rounded:"",outlined:"",label:"Device",disable:e.deviceIsOpen,"option-label":function(e){return e.comName},"option-value":function(e){return e},options:e.deviceList},scopedSlots:e._u([{key:"option",fn:function(t){return[i("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[i("q-item-section",[i("q-item-label",[e._v("\n                            "+e._s(t.opt.comName)+"\n                        ")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                            "+e._s(t.opt.pnpId)+"\n                        ")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                            "+e._s(t.opt.manufacturer)+"\n                        ")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                            vendorId:"+e._s(t.opt.vendorId)+"\n                        ")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                            productId:"+e._s(t.opt.productId)+"\n                        ")]),i("q-item-label",{attrs:{caption:""}},[e._v("\n                            serialNumber:"+e._s(t.opt.serialNumber)+"\n                        ")])],1)],1)]}},{key:"no-option",fn:function(){return[i("q-item",[i("q-item-section",[e._v("\n                        No Devices\n                    ")])],1)]},proxy:!0},{key:"append",fn:function(){return[i("q-btn",{attrs:{flat:"",round:"",dense:"",hint:"search devices",icon:"refresh",disable:e.deviceIsOpen,loading:e.deviceSearching},on:{click:function(t){return e.search()}},scopedSlots:e._u([{key:"loading",fn:function(){return[i("q-spinner-radio")]},proxy:!0}])})]},proxy:!0}]),model:{value:e.deviceSelected,callback:function(t){e.deviceSelected=t},expression:"deviceSelected"}}),i("q-btn",{style:{opacity:e.deviceSelected?"inherit":"0.05"},attrs:{rounded:"",icon:e.deviceIsOpen?"phonelink_off":"phonelink",loading:e.deviceConnecting,label:e.deviceIsOpen?"disconnect":"connect",disable:!e.deviceSelected},on:{click:function(t){return e.toggleConnect()}},scopedSlots:e._u([{key:"loading",fn:function(){return[i("q-spinner-gears")]},proxy:!0},{key:"after",fn:function(){return[i("q-icon",{attrs:{name:"close"}})]},proxy:!0}])})],1),i("section",[i("p",{staticClass:"q-ma-md"},[e._v("\n            "+e._s(e.deviceSelected)+"\n        ")])]),i("LogView",{ref:"mylog",staticClass:"q-mt-md q-pa-sm",attrs:{"show-demo-data":"",log:e.log},on:{"update:log":function(t){e.log=t}}}),i("section",{staticClass:"q-mt-md",staticStyle:{"min-width":"50vw"}},[i("q-input",{attrs:{filled:"",label:"Send Message",disable:!e.deviceIsOpen||e.deviceConnecting},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.messageSend()}},scopedSlots:e._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",style:{opacity:""!==e.messagaeToSend?"inherit":"0.1"},attrs:{name:"close"},on:{click:function(t){e.messagaeToSend=""}}})]},proxy:!0},{key:"after",fn:function(){return[i("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{round:"",dense:"",flat:"",icon:"send",disable:!e.deviceIsOpen||e.deviceConnecting},on:{click:function(t){return e.messageSend()}}})]},proxy:!0}]),model:{value:e.messagaeToSend,callback:function(t){e.messagaeToSend=t},expression:"messagaeToSend"}})],1)],1)},s=[],o=(i("ddb0"),i("11ec")),c=i("01bf");const a={vendorId:-1,productId:-1,comName:"/dummyResponder/0",pnpId:-1,locationId:-1,serialNumber:"42",manufacturer:"s-light.eu",product:"dummyResponder",release:void 0,interface:void 0,usagePage:void 0,usage:void 0};var l={name:"PageSerialTest",data(){return{serialAvailable:!1,device:void 0,parser:void 0,deviceList:[a],deviceSelected:"dummyResponder",deviceIsOpen:!1,deviceSearching:!1,deviceConnecting:!1,messagaeToSend:"Hello World :-)",log:void 0}},methods:{toggleConnect(){console.group("toggleConnect()"),this.deviceConnecting=!0,this.deviceIsOpen?(console.log("we will close now.."),this.deviceClose(),console.log("close done.")):(console.log("we will open now.."),this.deviceOpen()),console.groupEnd()},deviceOpen(){if(console.group("deviceOpen()"),console.log(`this.deviceSelected '${this.deviceSelected}'`),this.deviceSelected.comName.startsWith("/dummyResponder/"))console.log(`this.deviceSelected.comName '${this.deviceSelected.comName}'`),setTimeout((()=>{console.log("done."),this.deviceConnecting=!1,this.deviceIsOpen=!0}),500);else if(this.serialAvailable)try{this.device=new SerialPort(this.deviceSelected.comName,{baudRate:115200}),this.device.pipe(this.parser),this.device.on("open",(()=>{console.log("event open"),this.deviceIsOpen=this.device.isOpen,this.deviceConnecting=!1})),this.device.on("close",(()=>{console.log("event close"),this.deviceIsOpen=this.device.isOpen,this.deviceConnecting=!1}))}catch(e){console.error("port open failed:\n",e),this.deviceConnecting=!1}else this.deviceConnecting=!1,console.error("Serial not Available!");console.groupEnd()},deviceClose(){this.deviceSelected.comName.startsWith("/dummyResponder/")?setTimeout((()=>{this.deviceConnecting=!1,this.deviceIsOpen=!1}),500):this.serialAvailable&&this.device&&(this.deviceConnecting=!0,this.device.close())},messageSend(){if(this.deviceSelected.comName.startsWith("/dummyResponder/")){const e=this.messagaeToSend;setTimeout((()=>{this.messageReceive(e)}),1e3)}else this.serialAvailable&&this.device.write(this.messagaeToSend+"\n");this.$refs.mylog.addEntryOut(this.messagaeToSend),this.messagaeToSend=""},messageReceive(e){this.$refs.mylog.addEntryIn(e)},search(){this.serialAvailable?(this.deviceSearching=!0,SerialPort.list().then((e=>{const t={};Object(o["a"])(t,a),this.deviceList=[t];for(let i of e)i.vendorId&&this.deviceList.push(i);this.deviceSelected=this.deviceList[this.deviceList.length-1],this.deviceSearching=!1}),(e=>{console.error("serialport.list:",e),this.deviceSearching=!1}))):setTimeout((()=>{const e={};Object(o["a"])(e,a),e.comName="/dummyResponder/"+this.deviceList.length,e.serialNumber=42+100*this.deviceList.length,e.product="dummyResponder new"+this.deviceList.length,this.deviceList.push(e),this.deviceSearching=!1}),2e3)}},computed:{testthings:function(){let e=[];for(let t of this.deviceList)e.push(t.comName);return e}},mounted:function(){if(this.deviceSelected=this.deviceList[0],SerialPort){try{const e=SerialPort.parsers.Readline;this.parser=new e,this.parser.on("data",(e=>this.messageReceive(e))),this.serialAvailable=!0}catch(e){this.serialAvailable=!1,console.error(e)}this.search()}},beforeDestroy:function(){console.group("beforeDestroy.."),this.serialAvailable&&this.device&&this.device.isOpen&&(console.group("close devices."),this.device.close()),console.groupEnd()},filters:{},components:{LogView:c["a"]}},d=l,r=i("2877"),u=i("9989"),m=i("ddd8"),p=i("66e5"),h=i("4074"),v=i("0170"),g=i("9c40"),f=i("9569"),y=i("cf57"),S=i("0016"),b=i("27f9"),I=i("714f"),w=i("eebe"),C=i.n(w),_=Object(r["a"])(d,n,s,!1,null,null,null);t["default"]=_.exports;C()(_,"components",{QPage:u["a"],QSelect:m["a"],QItem:p["a"],QItemSection:h["a"],QItemLabel:v["a"],QBtn:g["a"],QSpinnerRadio:f["a"],QSpinnerGears:y["a"],QIcon:S["a"],QInput:b["a"]}),C()(_,"directives",{Ripple:I["a"]})}}]);