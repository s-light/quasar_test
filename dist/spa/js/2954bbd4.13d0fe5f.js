(window.webpackJsonp=window.webpackJsonp||[]).push([["2954bbd4"],{"1c4c":function(e,n,t){"use strict";var i=t("9b43"),o=t("5ca1"),s=t("4bf8"),c=t("1fa8"),a=t("33a4"),r=t("9def"),d=t("f1ae"),l=t("27ee");o(o.S+o.F*!t("5cc5")(function(e){Array.from(e)}),"Array",{from:function(e){var n,t,o,u,v=s(e),p="function"==typeof this?this:Array,h=arguments.length,f=h>1?arguments[1]:void 0,m=void 0!==f,g=0,y=l(v);if(m&&(f=i(f,h>2?arguments[2]:void 0,2)),null==y||p==Array&&a(y))for(t=new p(n=r(v.length));n>g;g++)d(t,g,m?f(v[g],g):v[g]);else for(u=y.call(v),t=new p;!(o=u.next()).done;g++)d(t,g,m?c(u,f,[o.value,g],!0):o.value);return t.length=g,t}})},b994:function(e,n,t){"use strict";t.r(n);t("386d"),t("ac4d"),t("8a81"),t("ac6a");var i=t("4db1"),o=t.n(i),s=(t("5df3"),t("1c4c"),t("f559"),t("11ec")),c=t("01bf"),a={vendorId:-1,productId:-1,path:"/dummyResponder/0",serialNumber:"42",manufacturer:"s-light.eu",product:"dummyResponder",release:-1,interface:-1,usagePage:-1,usage:-1},r={name:"PageSerialTest",data:function(){return{hidAvailable:!1,device:void 0,parser:void 0,deviceList:[a],deviceSelected:null,deviceIsOpen:!1,deviceSearching:!1,deviceConnecting:!1,messagaeToSend:"Hello World :-)",log:void 0}},methods:{toggleConnect:function(){console.group("toggleConnect()"),this.deviceConnecting=!0,this.deviceIsOpen?(console.log("we will close now.."),this.deviceClose(),console.log("close done.")):(console.log("we will open now.."),this.deviceOpen()),console.groupEnd()},deviceOpen:function(){var e=this;if(console.group("deviceOpen()"),console.log("this.deviceSelected '".concat(this.deviceSelected,"'")),this.deviceSelected.path.startsWith("/dummyResponder/"))setTimeout(function(){e.deviceConnecting=!1,e.deviceIsOpen=!0},500);else if(this.hidAvailable)try{this.device=new HID.HID(this.deviceSelected.path),this.device.on("error",function(n){e.$refs.mylog.addEntrySpecial(n)}),this.device.on("data",function(n){e.messageReceive(n)}),this.deviceIsOpen=!0,this.deviceConnecting=!1}catch(e){console.error("device open failed:\n",e),this.deviceIsOpen=!1,this.deviceConnecting=!1}console.groupEnd()},deviceClose:function(){var e=this;this.deviceSelected.path.startsWith("/dummyResponder/")?setTimeout(function(){e.deviceConnecting=!1,e.deviceIsOpen=!1},500):this.hidAvailable&&this.device&&(this.deviceConnecting=!0,this.device.close(),this.deviceIsOpen=!1,this.deviceConnecting=!1)},messageSend:function(){var e=this;if(console.group("messageSend"),console.log("messagaeToSend:",this.messagaeToSend),this.deviceSelected.path.startsWith("/dummyResponder/")){console.log("send to dummyResponder");var n=this.messagaeToSend;setTimeout(function(){e.messageReceive(n)},1e3)}else if(this.hidAvailable){console.log("hid is available.");try{console.log("write to device");var t=Array.from(this.messagaeToSend).map(function(e){return e.charCodeAt(0)});this.device.write(t)}catch(e){console.error("write failed:\n",e)}}this.$refs.mylog.addEntryOut(this.messagaeToSend),this.messagaeToSend="",console.groupEnd()},messageReceive:function(e){this.$refs.mylog.addEntryIn(e)},search:function(){var e=this;if(console.group("search for devices.."),this.deviceSearching=!0,this.hidAvailable){var n=HID.devices();if(n){var t,i={};Object(s.a)(i,a),this.deviceList=[i];var c=!0,r=!1,d=void 0;try{for(var l,u=n[Symbol.iterator]();!(c=(l=u.next()).done);c=!0){var v=l.value;console.log("device ".concat(v))}}catch(e){r=!0,d=e}finally{try{c||null==u.return||u.return()}finally{if(r)throw d}}(t=this.deviceList).push.apply(t,o()(n)),this.deviceSelected=this.deviceList[this.deviceList.length-1],this.deviceSearching=!1}else console.error("HID.devices:","failed."),this.deviceSearching=!1}else setTimeout(function(){var n={};Object(s.a)(n,a),n.path="/dummyResponder/"+e.deviceList.length,n.serialNumber=42+100*e.deviceList.length,n.product="dummyResponder new"+e.deviceList.length,e.deviceList.push(n),e.deviceSearching=!1},2e3);console.groupEnd()}},computed:{},mounted:function(){if(console.group("mounted.."),HID){try{HID.devices(),this.hidAvailable=!0}catch(e){this.hidAvailable=!1,console.error(e)}this.search()}this.hidAvailable||(console.log("create some dummyResponder entries.."),this.search(),this.search(),this.search()),console.groupEnd()},beforeDestroy:function(){console.group("beforeDestroy.."),this.hidAvailable&&this.device&&this.device.isOpen&&(console.group("close devices."),this.device.close()),console.groupEnd()},filters:{},components:{LogView:c.a}},d=t("2877"),l=Object(d.a)(r,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("q-page",{staticClass:"flex column",staticStyle:{"align-items":"center"}},[t("section",{staticClass:"q-mt-md row justify-around items-center "},[t("q-select",{staticClass:"q-mr-md",staticStyle:{"min-width":"16em",background:"transparent"},attrs:{rounded:"",outlined:"",label:"Device",disable:e.deviceIsOpen,"option-label":function(e){return e.product},"option-value":function(e){return e},options:e.deviceList},scopedSlots:e._u([{key:"option",fn:function(n){return[t("q-item",e._g(e._b({},"q-item",n.itemProps,!1),n.itemEvents),[t("q-item-section",[t("q-item-label",[e._v("\n                            "+e._s(n.opt.product)+"\n                        ")]),t("q-item-label",{attrs:{caption:""}},[e._v("\n                            "+e._s(n.opt.manufacturer)+"\n                        ")]),t("q-item-label",{attrs:{caption:""}},[e._v("\n                            "+e._s(n.opt.path)+"\n                        ")]),t("q-item-label",{attrs:{caption:""}},[e._v("\n                            vendorId:"+e._s(n.opt.vendorId)+"\n                        ")]),t("q-item-label",{attrs:{caption:""}},[e._v("\n                            productId:"+e._s(n.opt.productId)+"\n                        ")]),t("q-item-label",{attrs:{caption:""}},[e._v("\n                            serialNumber:"+e._s(n.opt.serialNumber)+"\n                        ")])],1)],1)]}},{key:"no-option",fn:function(){return[t("q-item",[t("q-item-section",[e._v("\n                        No Devices\n                    ")])],1)]},proxy:!0},{key:"append",fn:function(){return[t("q-btn",{attrs:{flat:"",round:"",dense:"",hint:"search devices",icon:"refresh",disable:e.deviceIsOpen,loading:e.deviceSearching},on:{click:function(n){return e.search()}},scopedSlots:e._u([{key:"loading",fn:function(){return[t("q-spinner-radio")]},proxy:!0}])})]},proxy:!0}]),model:{value:e.deviceSelected,callback:function(n){e.deviceSelected=n},expression:"deviceSelected"}}),t("q-btn",{style:{opacity:e.deviceSelected?"inherit":"0.05"},attrs:{rounded:"",icon:e.deviceIsOpen?"phonelink_off":"phonelink",loading:e.deviceConnecting,label:e.deviceIsOpen?"disconnect":"connect",disable:!e.deviceSelected},on:{click:function(n){return e.toggleConnect()}},scopedSlots:e._u([{key:"loading",fn:function(){return[t("q-spinner-gears")]},proxy:!0},{key:"after",fn:function(){return[t("q-icon",{attrs:{name:"close"}})]},proxy:!0}])})],1),t("section",[t("p",{staticClass:"q-ma-md"},[e._v("\n            "+e._s(e.deviceSelected)+"\n        ")])]),t("LogView",{ref:"mylog",staticClass:"q-mt-md q-pa-sm",attrs:{log:e.log},on:{"update:log":function(n){e.log=n}}}),t("section",{staticClass:"q-mt-md",staticStyle:{"min-width":"50vw"}},[t("q-input",{attrs:{filled:"",label:"Send Message",disable:!e.deviceIsOpen||e.deviceConnecting},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.messageSend()}},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",style:{opacity:""!==e.messagaeToSend?"inherit":"0.1"},attrs:{name:"close"},on:{click:function(n){e.messagaeToSend=""}}})]},proxy:!0},{key:"after",fn:function(){return[t("q-btn",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{round:"",dense:"",flat:"",icon:"send",disable:!e.deviceIsOpen||e.deviceConnecting},on:{click:function(n){return e.messageSend()}}})]},proxy:!0}]),model:{value:e.messagaeToSend,callback:function(n){e.messagaeToSend=n},expression:"messagaeToSend"}})],1)],1)},[],!1,null,null,null);n.default=l.exports},f1ae:function(e,n,t){"use strict";var i=t("86cc"),o=t("4630");e.exports=function(e,n,t){n in e?i.f(e,n,o(0,t)):e[n]=t}}}]);
//# sourceMappingURL=2954bbd4.13d0fe5f.js.map