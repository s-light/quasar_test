language: node_js
node_js:
    - "12"
cache: yarn

# https://docs.travis-ci.com/user/multi-os/
os:
    - linux
    - osx
    # - windows
    # be carefull - secrets are shown!!!
    # https://travis-ci.community/t/current-known-issues-please-read-this-before-posting-a-new-topic/264/22

dist: xenial

# jobs:
#     allow_failures:
#         - os: windows


addons:
  apt:
    packages:
        # needed for node-hid
        # https://www.npmjs.com/package/node-hid#compiling-from-source
        # https://github.com/node-hid/node-hid/pull/253
        - libusb-1.0-0
        - libusb-1.0-0-dev
        - libudev-dev
  # homebrew:
  #   packages: packagename


# this is all we need to trigger the upload...
# $GH_TOKEN has to be set...
after_success:
    - yarn release
    - yarn release_upload
    - echo "this should have updated the assertst in a release draft :-)"


# deploy:
#     skip_cleanup: true
#     provider: releases
#     api_key: $GH_TOKEN
#     # file: "FILE TO UPLOAD"
#     draft: true
#     on:
#         tags: true
# deploy:
#     skip_cleanup: true
#     provider: script
#     script: yarn release
