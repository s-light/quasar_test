{"version":3,"sources":["webpack:///./src/components/src/components/CanvasTextRender.vue"],"names":[],"mappings":";AAaA;IACA;AACA","file":"css/6b1e5a92.58a36c48.css","sourcesContent":["<template>\n    <div class=\"canvas-text-render\">\n        <!-- :width=\"width\" -->\n        <canvas\n            ref=\"canvas\"\n        >\n            {{ value }}\n        </canvas>\n        {{ width }}x{{ height }}\n    </div>\n</template>\n\n<style>\n    canvas {\n        border: 1px solid black;\n    }\n</style>\n\n<script>\nexport default {\n    // name: 'CanvasTextRender',\n    // props: ['value', 'font', 'width', 'height'],\n    props: {\n        value: {\n            type: String,\n            default: ''\n        },\n        fontFamily: {\n            type: String,\n            default: 'sans'\n        },\n        fontSize: {\n            type: Number,\n            default: 11\n        },\n        fontWeight: {\n            type: Number,\n            default: 500\n        },\n        italic: {\n            type: Boolean,\n            default: false\n        },\n        // width: {\n        //     type: Number,\n        //     default: 44\n        // }\n        height: {\n            type: Number,\n            default: 11\n        }\n    },\n    data () {\n        return {\n            testmessage: '16:05 Here we have some text...',\n            width: 100\n            // height: 10\n        }\n    },\n    computed: {\n        // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n        font: function () {\n            let font = ''\n            if (this.italic) {\n                font += 'italic '\n            }\n            // font += this.fontWeight + ' '\n            // font += ' ' + this.height + 'px'\n            font += this.height + 'px'\n            // font += ' ' + this.fontSize\n            font += ' \"' + this.fontFamily + '\"'\n            return font\n        }\n        // },\n        // width: function () {\n        //     let textWidth = 200\n        //     if (this.$refs.canvas) {\n        //         console.log('this.$refs.canvas', this.$refs.canvas)\n        //         const ctx = this.$refs.canvas.getContext('2d')\n        //         textWidth = ctx.measureText(this.value).width\n        //     }\n        //     console.log('textWidth', textWidth)\n        //     return textWidth\n        //     // return 100\n        // }\n    },\n    methods: {\n        updateCanvas: function () {\n            // console.log('this', this)\n            const canvas = this.$refs.canvas\n            if (canvas) {\n                const ctx = canvas.getContext('2d')\n\n                // get new width\n                let textWidth = ctx.measureText(this.value).width\n                this.width = textWidth\n                // ^- fires after updateCanvas is done and so clears the canvas..\n                canvas.width = textWidth\n                // console.log('textWidth', textWidth)\n\n                // clean up\n                ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n                console.log('this.font', this.font)\n                // render\n                ctx.fillStyle = 'black'\n                ctx.font = this.font\n                ctx.fillText(this.value, 0, this.height - 1)\n            }\n        }\n    },\n    watch: {\n        value: function () {\n            this.updateCanvas()\n        },\n        font: function () {\n            this.updateCanvas()\n            this.updateCanvas()\n        },\n        height: function (value) {\n            const canvas = this.$refs.canvas\n            if (canvas) {\n                canvas.height = value\n            }\n            this.updateCanvas()\n        }\n        // width: function () {\n        //     this.updateCanvas()\n        // }\n    },\n    mounted: function () {\n        const canvas = this.$refs.canvas\n        if (canvas) {\n            canvas.height = this.height\n            canvas.width = this.width\n        }\n        this.updateCanvas()\n        this.updateCanvas()\n    }\n}\n</script>\n"],"sourceRoot":""}